<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Math Notes - Search</title>
  <meta name="theme-color" content="#040d01">
  <meta name="description" content="Web Proxy - AirAI Platform">
  <link rel="icon" type="image/x-icon" href="../favicon.ico">
  <link rel="apple-touch-icon" href="../icons/icon-192x192.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      color: #1a1a1a;
      position: relative;
      overflow-x: hidden;
    }

    /* Animated Background */
    .background-animation {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: 0; overflow: hidden; pointer-events: none;
    }
    .bg-gradient {
      position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.3;
      animation: float 20s infinite ease-in-out;
    }
    .bg-gradient-1 { width: 500px; height: 500px; background: radial-gradient(circle, #4caf50, #66bb6a); top: -10%; left: -10%; }
    .bg-gradient-2 { width: 400px; height: 400px; background: radial-gradient(circle, #66bb6a, #ffffff); top: 50%; right: -5%; animation-delay: 7s; }
    .bg-gradient-3 { width: 600px; height: 600px; background: radial-gradient(circle, #4caf50, #f5f5f5); bottom: -15%; left: 30%; animation-delay: 14s; }
    .grid-pattern {
      position: absolute; width: 100%; height: 100%;
      background-image: linear-gradient(rgba(46,125,50,0.03) 1px, transparent 1px),
        linear-gradient(90deg, rgba(46,125,50,0.03) 1px, transparent 1px);
      background-size: 50px 50px;
      animation: gridMove 30s linear infinite;
    }
    @keyframes float { 0%,100%{transform:translate(0,0) scale(1)} 33%{transform:translate(30px,-30px) scale(1.1)} 66%{transform:translate(-20px,20px) scale(0.9)} }
    @keyframes gridMove { 0%{transform:translate(0,0)} 100%{transform:translate(50px,50px)} }
    @keyframes fadeUp { from{opacity:0;transform:translateY(16px)} to{opacity:1;transform:translateY(0)} }
    @keyframes spin { to{transform:rotate(360deg)} }

    .header, .main-content, .page-footer { position: relative; z-index: 1; }

    /* Header */
    .header {
      background: #ffffff; border-bottom: 1px solid #e0e0e0; padding: 16px 0;
    }
    .header-content {
      max-width: 1200px; margin: 0 auto; padding: 0 24px;
      display: flex; align-items: center; justify-content: space-between;
    }
    .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; cursor: default; }
    .logo-icon {
      width: 32px; height: 32px;
      background: linear-gradient(135deg, #4caf50, #66bb6a);
      border-radius: 8px; display: flex; align-items: center; justify-content: center;
      box-shadow: 0 0 20px rgba(46,125,50,0.4);
    }
    .logo-icon svg { width: 18px; height: 18px; color: #2d2d2d; }
    .logo-text { font-size: 20px; font-weight: 700; color: #2d2d2d; }
    .header-links { display: flex; gap: 12px; align-items: center; }
    .header-btn {
      background: rgba(46,125,50,0.15); border: 1px solid #4caf50; color: #2e7d32;
      padding: 8px 14px; border-radius: 8px; font-size: 13px; font-weight: 600;
      cursor: pointer; font-family: inherit; transition: all 0.2s;
    }
    .header-btn:hover { background: #4caf50; color: #2d2d2d; }

    /* Search hero */
    .search-hero {
      text-align: center; padding: 48px 24px 24px; animation: fadeUp 0.6s ease;
    }
    .search-hero h1 {
      font-size: 32px; font-weight: 800;
      background: linear-gradient(135deg, #1b5e20, #2e7d32, #2e7d32);
      -webkit-background-clip: text; -webkit-text-fill-color: transparent;
      margin-bottom: 8px;
    }
    .search-hero p { color: #2e7d32; font-size: 14px; max-width: 600px; margin: 0 auto; line-height: 1.6; }

    /* Search Container */
    .search-container { max-width: 700px; margin: 24px auto; padding: 0 24px; animation: fadeUp 0.7s ease; }
    .search-wrapper { display: flex; gap: 0; }
    .search-input {
      flex: 1; background: rgba(255, 255, 255,0.8); border: 2px solid #e0e0e0;
      border-right: none; border-radius: 12px 0 0 12px;
      padding: 14px 20px; color: #1a1a1a; font-size: 15px; font-family: inherit;
      outline: none; transition: border-color 0.2s;
    }
    .search-input:focus { border-color: #4caf50; }
    .search-input::placeholder { color: #757575; }
    .search-btn {
      background: linear-gradient(135deg, #4caf50, #66bb6a); border: 2px solid #4caf50;
      border-radius: 0 12px 12px 0; padding: 14px 24px; color: #2d2d2d;
      font-size: 15px; font-weight: 600; cursor: pointer; font-family: inherit;
      display: flex; align-items: center; gap: 8px; transition: all 0.2s; white-space: nowrap;
    }
    .search-btn:hover { background: linear-gradient(135deg, #388e3c, #4caf50); }
    .search-btn svg { width: 18px; height: 18px; }

    /* Method selector */
    .method-bar {
      max-width: 700px; margin: 16px auto; padding: 0 24px;
      display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;
      animation: fadeUp 0.8s ease;
    }
    .method-btn {
      background: rgba(255, 255, 255,0.7); border: 1px solid #e0e0e0;
      color: #6b9b6b; padding: 8px 16px; border-radius: 20px;
      font-size: 13px; font-weight: 600; cursor: pointer; font-family: inherit;
      transition: all 0.2s; display: flex; align-items: center; gap: 6px;
    }
    .method-btn:hover { border-color: #4caf50; color: #2e7d32; }
    .method-btn.active {
      background: rgba(46,125,50,0.2); border-color: #4caf50; color: #1b5e20;
    }
    .method-btn .dot {
      width: 6px; height: 6px; border-radius: 50%; background: #2e7d32;
    }

    /* Info cards */
    .info-grid {
      max-width: 700px; margin: 32px auto; padding: 0 24px;
      display: grid; grid-template-columns: 1fr 1fr; gap: 12px;
      animation: fadeUp 0.9s ease;
    }
    .info-card {
      background: rgba(255, 255, 255,0.6); border: 1px solid rgba(46,125,50,0.2);
      border-radius: 12px; padding: 16px; text-align: center;
    }
    .info-card .icon { font-size: 24px; margin-bottom: 6px; }
    .info-card .label { font-size: 12px; color: #2e7d32; font-weight: 600; }
    .info-card .desc { font-size: 11px; color: #757575; margin-top: 4px; line-height: 1.4; }

    /* Status messages */
    .status-area {
      max-width: 700px; margin: 16px auto; padding: 0 24px;
    }
    .status-msg {
      background: rgba(255, 255, 255,0.7); border: 1px solid #e0e0e0;
      border-radius: 10px; padding: 14px 18px; font-size: 13px; color: #2e7d32;
      line-height: 1.5; display: none;
    }
    .status-msg.show { display: block; animation: fadeUp 0.3s ease; }
    .status-msg.error { border-color: #c62828; color: #ef9a9a; }
    .status-msg.success { border-color: #4caf50; color: #1b5e20; }
    .status-msg a { color: #388e3c; text-decoration: underline; cursor: pointer; }

    /* Quick links */
    .quick-links {
      max-width: 700px; margin: 24px auto; padding: 0 24px;
    }
    .quick-links h3 { font-size: 14px; color: #757575; margin-bottom: 10px; font-weight: 600; }
    .quick-grid { display: flex; flex-wrap: wrap; gap: 8px; }
    .quick-chip {
      background: rgba(255, 255, 255,0.7); border: 1px solid #e0e0e0;
      color: #2e7d32; padding: 6px 14px; border-radius: 20px;
      font-size: 12px; font-weight: 600; cursor: pointer; font-family: inherit;
      transition: all 0.2s;
    }
    .quick-chip:hover { border-color: #4caf50; color: #1b5e20; background: rgba(46,125,50,0.15); }

    /* Footer */
    .page-footer {
      text-align: center; padding: 24px; margin-top: auto;
      border-top: 1px solid rgba(46,125,50,0.1);
    }
    .page-footer p { font-size: 12px; color: #757575; }

    /* Toast */
    .toast {
      position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%) translateY(80px);
      background: #66bb6a; color: #2d2d2d; padding: 12px 24px; border-radius: 10px;
      font-size: 13px; font-weight: 600; z-index: 9999; transition: transform 0.3s;
      box-shadow: 0 8px 24px rgba(0,0,0,0.4);
    }
    .toast.show { transform: translateX(-50%) translateY(0); }

    @media (max-width: 640px) {
      .search-hero h1 { font-size: 24px; }
      .info-grid { grid-template-columns: 1fr; }
      .search-wrapper { flex-direction: column; }
      .search-input { border-right: 2px solid #e0e0e0; border-radius: 12px 12px 0 0; border-bottom: none; }
      .search-btn { border-radius: 0 0 12px 12px; justify-content: center; }
    }
  </style>
</head>
<body>

<div class="background-animation">
  <div class="bg-gradient bg-gradient-1"></div>
  <div class="bg-gradient bg-gradient-2"></div>
  <div class="bg-gradient bg-gradient-3"></div>
  <div class="grid-pattern"></div>
</div>

<!-- Header -->
<header class="header">
  <div class="header-content">
    <div class="logo">
      <div class="logo-icon">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
          <path d="M13 10V3L4 14h7v7l9-11h-7z"/>
        </svg>
      </div>
      <span class="logo-text">AirAI &middot; Proxy</span>
    </div>
    <div class="header-links">
      <a href="#" class="header-btn" style="text-decoration:none;" onclick="event.preventDefault();window.location.href='../dark-mode/login.html'">&larr; Back</a>
      <button class="header-btn" onclick="openAboutBlank()" title="Open this page in about:blank">&#128737; Cloak</button>
      <a href="../dark-mode/proxys.html" class="header-btn" style="text-decoration:none;">&#127769; Dark</a>
    </div>
  </div>
</header>

<!-- Main Content -->
<main class="main-content">
  <div class="search-hero">
    <h1>&#127760; Web Proxy</h1>
    <p>Open any URL through multiple bypass methods. If one method is blocked, try another. Enter a URL or search query below.</p>
  </div>

  <!-- Search Box -->
  <div class="search-container">
    <div class="search-wrapper">
      <input type="text" id="searchInput" class="search-input" placeholder="Enter a URL or search query..." autocomplete="off" autofocus>
      <button class="search-btn" onclick="go()">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        Go
      </button>
    </div>
  </div>

  <!-- Bypass Method Selector -->
  <div class="method-bar">
    <button class="method-btn active" data-method="allorigins" onclick="setMethod('allorigins')">
      <span class="dot"></span> AllOrigins
    </button>
    <button class="method-btn" data-method="corsproxy" onclick="setMethod('corsproxy')">
      <span class="dot"></span> CORSProxy.io
    </button>
    <button class="method-btn" data-method="about-blank" onclick="setMethod('about-blank')">
      <span class="dot"></span> about:blank
    </button>
    <button class="method-btn" data-method="google-search" onclick="setMethod('google-search')">
      <span class="dot"></span> Google Search
    </button>
    <button class="method-btn" data-method="google-translate" onclick="setMethod('google-translate')">
      <span class="dot"></span> Google Translate
    </button>
    <button class="method-btn" data-method="google-cache" onclick="setMethod('google-cache')">
      <span class="dot"></span> Google Cache
    </button>
    <button class="method-btn" data-method="blob-url" onclick="setMethod('blob-url')">
      <span class="dot"></span> Blob URL
    </button>
    <button class="method-btn" data-method="data-uri" onclick="setMethod('data-uri')">
      <span class="dot"></span> Data URI
    </button>
    <button class="method-btn" data-method="srcdoc" onclick="setMethod('srcdoc')">
      <span class="dot"></span> srcdoc Iframe
    </button>
    <button class="method-btn" data-method="google-amp" onclick="setMethod('google-amp')">
      <span class="dot"></span> Google AMP
    </button>
    <button class="method-btn" data-method="codetabs" onclick="setMethod('codetabs')">
      <span class="dot"></span> codetabs
    </button>
    <button class="method-btn" data-method="bing-search" onclick="setMethod('bing-search')">
      <span class="dot"></span> Bing Search
    </button>
    <button class="method-btn" data-method="duckduckgo" onclick="setMethod('duckduckgo')">
      <span class="dot"></span> DuckDuckGo
    </button>
    <button class="method-btn" data-method="meta-refresh" onclick="setMethod('meta-refresh')">
      <span class="dot"></span> Meta Refresh
    </button>
    <button class="method-btn" data-method="object-tag" onclick="setMethod('object-tag')">
      <span class="dot"></span> Object Tag
    </button>
    <button class="method-btn" data-method="double-iframe" onclick="setMethod('double-iframe')">
      <span class="dot"></span> Double Iframe
    </button>
    <button class="method-btn" data-method="worker-fetch" onclick="setMethod('worker-fetch')">
      <span class="dot"></span> Worker Fetch
    </button>
    <button class="method-btn" data-method="proxy-chain" onclick="setMethod('proxy-chain')">
      <span class="dot"></span> Proxy Chain
    </button>
  </div>

  <!-- Info Cards -->
  <div class="info-grid">
    <div class="info-card">
      <div class="icon">&#127760;</div>
      <div class="label">AllOrigins</div>
      <div class="desc">Public CORS proxy that fetches any page server-side. Opens in about:blank window.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128256;</div>
      <div class="label">CORSProxy.io</div>
      <div class="desc">Alternative CORS proxy. Use if AllOrigins is blocked. Fetches page server-side.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128196;</div>
      <div class="label">about:blank</div>
      <div class="desc">Opens site in a hidden iframe inside an about:blank tab. URL bar shows about:blank.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128269;</div>
      <div class="label">Google Search</div>
      <div class="desc">Opens Google Search with ?igu=1 embedded mode. Traffic goes to google.com.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#127758;</div>
      <div class="label">Google Translate</div>
      <div class="desc">Proxies through translate.google.com. Hard to block since it's a Google service.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128248;</div>
      <div class="label">Google Cache</div>
      <div class="desc">Opens Google's cached snapshot from webcache.googleusercontent.com.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128190;</div>
      <div class="label">Blob URL</div>
      <div class="desc">Fetches content and opens as blob: URL. Many filters don't check blob URLs.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128187;</div>
      <div class="label">Data URI</div>
      <div class="desc">Encodes page as base64 data: URI. Completely different URL scheme from http.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128195;</div>
      <div class="label">srcdoc Iframe</div>
      <div class="desc">Embeds fetched HTML via srcdoc attribute. No separate request visible to filters.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#9889;</div>
      <div class="label">Google AMP</div>
      <div class="desc">Opens through Google's AMP cache CDN. Traffic goes to ampproject.org.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128421;</div>
      <div class="label">codetabs</div>
      <div class="desc">Third CORS proxy via api.codetabs.com. Try if other proxies are blocked.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128270;</div>
      <div class="label">Bing Search</div>
      <div class="desc">Opens search through Bing. Alternative route if Google is blocked.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#129414;</div>
      <div class="label">DuckDuckGo</div>
      <div class="desc">Privacy-focused search engine. Routes traffic through duckduckgo.com.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128260;</div>
      <div class="label">Meta Refresh</div>
      <div class="desc">Opens about:blank with meta http-equiv refresh redirect. No JS navigation.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128230;</div>
      <div class="label">Object Tag</div>
      <div class="desc">Embeds via &lt;object&gt; element instead of iframe. Different filter detection.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128194;</div>
      <div class="label">Double Iframe</div>
      <div class="desc">Nested about:blank &rarr; srcdoc &rarr; iframe. Extra layer of URL obfuscation.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#9881;</div>
      <div class="label">Worker Fetch</div>
      <div class="desc">Fetches via Web Worker thread. Content loaded outside main thread context.</div>
    </div>
    <div class="info-card">
      <div class="icon">&#128279;</div>
      <div class="label">Proxy Chain</div>
      <div class="desc">Chains two CORS proxies together. Double-proxied for extra bypass capability.</div>
    </div>
  </div>

  <!-- Status Area -->
  <div class="status-area">
    <div class="status-msg" id="statusMsg"></div>
  </div>

  <!-- Quick Links -->
  <div class="quick-links">
    <h3>&#9889; Quick Links</h3>
    <div class="quick-grid" id="quickGrid"></div>
  </div>
</main>

<!-- Footer -->
<footer class="page-footer">
  <p>&copy; 2026 AirAI, Inc. All rights reserved. &middot; <span style="color: #757575;">v2.0</span></p>
</footer>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
  // =====================
  // STATE
  // =====================
  var currentMethod = 'allorigins';

  // =====================
  // QUICK LINKS DATA
  // =====================
  var quickLinks = [
    { label: 'Google', url: 'https://www.google.com' },
    { label: 'YouTube', url: 'https://www.youtube.com' },
    { label: 'Discord', url: 'https://discord.com/app' },
    { label: 'Reddit', url: 'https://www.reddit.com' },
    { label: 'Spotify', url: 'https://open.spotify.com' },
    { label: 'Netflix', url: 'https://www.netflix.com' },
    { label: 'Twitter / X', url: 'https://x.com' },
    { label: 'TikTok', url: 'https://www.tiktok.com' },
    { label: 'Instagram', url: 'https://www.instagram.com' },
    { label: 'Twitch', url: 'https://www.twitch.tv' },
    { label: 'ChatGPT', url: 'https://chat.openai.com' },
    { label: 'Steam', url: 'https://store.steampowered.com' },
    { label: 'GitHub', url: 'https://github.com' },
    { label: 'Coolmath Games', url: 'https://www.coolmathgames.com' },
  ];

  // Build quick link chips
  (function() {
    var grid = document.getElementById('quickGrid');
    quickLinks.forEach(function(link) {
      var chip = document.createElement('button');
      chip.className = 'quick-chip';
      chip.textContent = link.label;
      chip.onclick = function() {
        document.getElementById('searchInput').value = link.url;
        go();
      };
      grid.appendChild(chip);
    });
  })();

  // =====================
  // METHOD SELECTION
  // =====================
  function setMethod(method) {
    currentMethod = method;
    document.querySelectorAll('.method-btn').forEach(function(btn) {
      btn.classList.toggle('active', btn.getAttribute('data-method') === method);
    });
  }

  // =====================
  // INPUT HANDLING
  // =====================
  document.getElementById('searchInput').addEventListener('keydown', function(e) {
    if (e.key === 'Enter') go();
  });

  function looksLikeUrl(str) {
    return /^(https?:\/\/)/i.test(str) ||
           /^[a-zA-Z0-9]([a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}(\/.*)?$/.test(str);
  }

  function ensureProtocol(url) {
    if (!/^https?:\/\//i.test(url)) return 'https://' + url;
    return url;
  }

  // =====================
  // MAIN GO FUNCTION
  // =====================
  function go() {
    var query = document.getElementById('searchInput').value.trim();
    if (!query) return;

    hideStatus();

    var isUrl = looksLikeUrl(query);
    var url = isUrl ? ensureProtocol(query) : null;
    var searchFallback = 'https://www.google.com/search?q=' + encodeURIComponent(query);

    switch (currentMethod) {
      case 'allorigins':
        openAllOrigins(isUrl ? url : searchFallback);
        break;

      case 'corsproxy':
        openCorsProxy(isUrl ? url : searchFallback);
        break;

      case 'about-blank':
        openAboutBlankTab(isUrl ? url : searchFallback);
        break;

      case 'google-search':
        openGoogleSearch(query, isUrl ? url : null);
        break;

      case 'google-translate':
        openGoogleTranslate(isUrl ? url : searchFallback);
        break;

      case 'google-cache':
        if (isUrl) {
          openGoogleCache(url);
        } else {
          showStatus('Google Cache needs a URL. Try entering a website address.', 'error');
        }
        break;

      case 'blob-url':
        openBlobUrl(isUrl ? url : searchFallback);
        break;

      case 'data-uri':
        openDataUri(isUrl ? url : searchFallback);
        break;

      case 'srcdoc':
        openSrcdoc(isUrl ? url : searchFallback);
        break;

      case 'google-amp':
        if (isUrl) {
          openGoogleAmp(url);
        } else {
          showStatus('Google AMP needs a URL. Try entering a website address.', 'error');
        }
        break;

      case 'codetabs':
        openCodetabs(isUrl ? url : searchFallback);
        break;

      case 'bing-search':
        openBingSearch(query, isUrl ? url : null);
        break;

      case 'duckduckgo':
        openDuckDuckGo(query, isUrl ? url : null);
        break;

      case 'meta-refresh':
        openMetaRefresh(isUrl ? url : searchFallback);
        break;

      case 'object-tag':
        openObjectTag(isUrl ? url : searchFallback);
        break;

      case 'double-iframe':
        openDoubleIframe(isUrl ? url : searchFallback);
        break;

      case 'worker-fetch':
        openWorkerFetch(isUrl ? url : searchFallback);
        break;

      case 'proxy-chain':
        openProxyChain(isUrl ? url : searchFallback);
        break;
    }
  }

  // ========================================
  // METHOD 1: ALLORIGINS CORS PROXY
  // ========================================
  function openAllOrigins(url) {
    showStatus('Fetching page through AllOrigins proxy...', 'success');

    var proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);

    fetch(proxyUrl)
      .then(function(resp) {
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        return resp.text();
      })
      .then(function(html) {
        var origin = new URL(url).origin;
        html = html.replace('<head>', '<head><base href="' + origin + '/">');

        var win = window.open('about:blank', '_blank');
        if (win) {
          win.document.open();
          win.document.write(html);
          win.document.close();
          win.document.title = 'Math Notes';
          showStatus('Page loaded through AllOrigins. URL bar shows <strong>about:blank</strong>.', 'success');
        } else {
          showStatus('Popup blocked. Allow popups and try again.', 'error');
        }
      })
      .catch(function(err) {
        showStatus('AllOrigins error: ' + err.message + '. Try a different method.', 'error');
      });
  }

  // ========================================
  // METHOD 2: CORSPROXY.IO
  // ========================================
  function openCorsProxy(url) {
    showStatus('Fetching page through CORSProxy.io...', 'success');

    var proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(url);

    fetch(proxyUrl)
      .then(function(resp) {
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        return resp.text();
      })
      .then(function(html) {
        var origin = new URL(url).origin;
        html = html.replace('<head>', '<head><base href="' + origin + '/">');

        var win = window.open('about:blank', '_blank');
        if (win) {
          win.document.open();
          win.document.write(html);
          win.document.close();
          win.document.title = 'Math Notes';
          showStatus('Page loaded through CORSProxy.io. URL bar shows <strong>about:blank</strong>.', 'success');
        } else {
          showStatus('Popup blocked. Allow popups and try again.', 'error');
        }
      })
      .catch(function(err) {
        showStatus('CORSProxy.io error: ' + err.message + '. Try a different method.', 'error');
      });
  }

  // ========================================
  // METHOD 3: ABOUT:BLANK IFRAME
  // ========================================
  function openAboutBlankTab(url) {
    var win = window.open('about:blank', '_blank');
    if (!win) {
      showStatus('Popup blocked. Allow popups and try again.', 'error');
      return;
    }

    win.document.title = 'Math Notes';
    var link = win.document.createElement('link');
    link.rel = 'icon';
    link.type = 'image/x-icon';
    link.href = new URL('favicon.ico', window.location.href).href;
    win.document.head.appendChild(link);

    win.document.body.style.cssText = 'margin:0;height:100vh;overflow:hidden;';
    var iframe = win.document.createElement('iframe');
    iframe.style.cssText = 'border:none;width:100%;height:100%;position:fixed;top:0;left:0;';
    iframe.src = url;
    win.document.body.appendChild(iframe);

    showStatus('Opened in about:blank tab with iframe. URL bar shows <strong>about:blank</strong>.', 'success');
  }

  // ========================================
  // METHOD 4: GOOGLE SEARCH
  // ========================================
  function openGoogleSearch(query, directUrl) {
    var searchUrl;
    if (directUrl) {
      searchUrl = 'https://www.google.com/search?igu=1&q=site:' + encodeURIComponent(directUrl.replace(/^https?:\/\//, ''));
    } else {
      searchUrl = 'https://www.google.com/search?igu=1&q=' + encodeURIComponent(query);
    }

    var win = window.open(searchUrl, '_blank');
    if (!win) {
      showStatus('Popup blocked. <a onclick="window.location.href=\'' + searchUrl.replace(/'/g, "\\'") + '\'">Click here</a>', 'error');
      return;
    }

    showStatus('Opened Google Search with ?igu=1 embedded mode.', 'success');
  }

  // ========================================
  // METHOD 5: GOOGLE TRANSLATE PROXY
  // ========================================
  function openGoogleTranslate(url) {
    var translateUrl = 'https://translate.google.com/translate?sl=fr&tl=en&u=' + encodeURIComponent(url);

    showStatus('Opening through Google Translate. Traffic goes to <strong>translate.google.com</strong>.', 'success');

    var win = window.open(translateUrl, '_blank');
    if (!win) {
      showStatus('Popup blocked. <a onclick="window.location.href=\'' + translateUrl.replace(/'/g, "\\'") + '\'">Click here</a>', 'error');
    }
  }

  // ========================================
  // METHOD 6: GOOGLE CACHE
  // ========================================
  function openGoogleCache(url) {
    var cacheUrl = 'https://webcache.googleusercontent.com/search?q=cache:' + encodeURIComponent(url);

    showStatus('Opening Google Cache. Served from <strong>googleusercontent.com</strong>.', 'success');

    var win = window.open(cacheUrl, '_blank');
    if (!win) {
      showStatus('Popup blocked. <a onclick="window.location.href=\'' + cacheUrl.replace(/'/g, "\\'") + '\'">Click here</a>', 'error');
    }
  }

  // ========================================
  // METHOD 7: BLOB URL
  // ========================================
  function openBlobUrl(url) {
    showStatus('Fetching page for Blob URL...', 'success');

    var proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);

    fetch(proxyUrl)
      .then(function(resp) {
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        return resp.text();
      })
      .then(function(html) {
        var origin = new URL(url).origin;
        html = html.replace('<head>', '<head><base href="' + origin + '/">');

        var blob = new Blob([html], { type: 'text/html' });
        var blobUrl = URL.createObjectURL(blob);
        var win = window.open(blobUrl, '_blank');
        if (win) {
          showStatus('Opened as <strong>blob:</strong> URL. Many filters skip blob URLs.', 'success');
        } else {
          showStatus('Popup blocked. Allow popups and try again.', 'error');
        }
      })
      .catch(function(err) {
        showStatus('Blob URL error: ' + err.message + '. Try a different method.', 'error');
      });
  }

  // ========================================
  // METHOD 8: DATA URI
  // ========================================
  function openDataUri(url) {
    showStatus('Fetching page for Data URI...', 'success');

    var proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);

    fetch(proxyUrl)
      .then(function(resp) {
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        return resp.text();
      })
      .then(function(html) {
        var origin = new URL(url).origin;
        html = html.replace('<head>', '<head><base href="' + origin + '/">');

        var encoded = btoa(unescape(encodeURIComponent(html)));
        var dataUrl = 'data:text/html;base64,' + encoded;

        var win = window.open(dataUrl, '_blank');
        if (win) {
          showStatus('Opened as <strong>data:</strong> URI. Completely different URL scheme.', 'success');
        } else {
          var win2 = window.open('about:blank', '_blank');
          if (win2) {
            win2.document.title = 'Math Notes';
            win2.document.body.style.cssText = 'margin:0;height:100vh;overflow:hidden;';
            var iframe = win2.document.createElement('iframe');
            iframe.style.cssText = 'border:none;width:100%;height:100%;position:fixed;top:0;left:0;';
            iframe.src = dataUrl;
            win2.document.body.appendChild(iframe);
            showStatus('Opened data URI in about:blank iframe fallback.', 'success');
          } else {
            showStatus('Popup blocked. Allow popups and try again.', 'error');
          }
        }
      })
      .catch(function(err) {
        showStatus('Data URI error: ' + err.message + '. Try a different method.', 'error');
      });
  }

  // ========================================
  // METHOD 9: SRCDOC IFRAME
  // ========================================
  function openSrcdoc(url) {
    showStatus('Fetching page for srcdoc iframe...', 'success');

    var proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);

    fetch(proxyUrl)
      .then(function(resp) {
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        return resp.text();
      })
      .then(function(html) {
        var origin = new URL(url).origin;
        html = html.replace('<head>', '<head><base href="' + origin + '/">');

        var win = window.open('about:blank', '_blank');
        if (win) {
          win.document.title = 'Math Notes';
          win.document.body.style.cssText = 'margin:0;height:100vh;overflow:hidden;';
          var iframe = win.document.createElement('iframe');
          iframe.style.cssText = 'border:none;width:100%;height:100%;position:fixed;top:0;left:0;';
          iframe.srcdoc = html;
          iframe.sandbox = 'allow-scripts allow-same-origin allow-forms allow-popups';
          win.document.body.appendChild(iframe);
          showStatus('Opened via <strong>srcdoc</strong> iframe. No separate URL request visible.', 'success');
        } else {
          showStatus('Popup blocked. Allow popups and try again.', 'error');
        }
      })
      .catch(function(err) {
        showStatus('srcdoc error: ' + err.message + '. Try a different method.', 'error');
      });
  }

  // ========================================
  // METHOD 10: GOOGLE AMP CACHE
  // ========================================
  function openGoogleAmp(url) {
    var stripped = url.replace(/^https?:\/\//, '');
    var ampUrl = 'https://cdn.ampproject.org/c/s/' + stripped;

    showStatus('Opening through Google AMP Cache. Traffic goes to <strong>cdn.ampproject.org</strong>.', 'success');

    var win = window.open(ampUrl, '_blank');
    if (!win) {
      showStatus('Popup blocked. <a onclick="window.location.href=\'' + ampUrl.replace(/'/g, "\\'") + '\'">Click here</a>', 'error');
    }
  }

  // ========================================
  // METHOD 11: CODETABS CORS PROXY
  // ========================================
  function openCodetabs(url) {
    showStatus('Fetching page through codetabs proxy...', 'success');

    var proxyUrl = 'https://api.codetabs.com/v1/proxy?quest=' + encodeURIComponent(url);

    fetch(proxyUrl)
      .then(function(resp) {
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        return resp.text();
      })
      .then(function(html) {
        var origin = new URL(url).origin;
        html = html.replace('<head>', '<head><base href="' + origin + '/">');

        var win = window.open('about:blank', '_blank');
        if (win) {
          win.document.open();
          win.document.write(html);
          win.document.close();
          win.document.title = 'Math Notes';
          showStatus('Page loaded through codetabs. URL bar shows <strong>about:blank</strong>.', 'success');
        } else {
          showStatus('Popup blocked. Allow popups and try again.', 'error');
        }
      })
      .catch(function(err) {
        showStatus('codetabs error: ' + err.message + '. Try a different method.', 'error');
      });
  }

  // ========================================
  // METHOD 12: BING SEARCH
  // ========================================
  function openBingSearch(query, directUrl) {
    var searchUrl;
    if (directUrl) {
      searchUrl = 'https://www.bing.com/search?q=site:' + encodeURIComponent(directUrl.replace(/^https?:\/\//, ''));
    } else {
      searchUrl = 'https://www.bing.com/search?q=' + encodeURIComponent(query);
    }

    var win = window.open(searchUrl, '_blank');
    if (!win) {
      showStatus('Popup blocked. <a onclick="window.location.href=\'' + searchUrl.replace(/'/g, "\\'") + '\'">Click here</a>', 'error');
      return;
    }

    showStatus('Opened Bing Search. Traffic goes to <strong>bing.com</strong>.', 'success');
  }

  // ========================================
  // METHOD 13: DUCKDUCKGO
  // ========================================
  function openDuckDuckGo(query, directUrl) {
    var searchUrl;
    if (directUrl) {
      searchUrl = 'https://duckduckgo.com/?q=site:' + encodeURIComponent(directUrl.replace(/^https?:\/\//, ''));
    } else {
      searchUrl = 'https://duckduckgo.com/?q=' + encodeURIComponent(query);
    }

    var win = window.open(searchUrl, '_blank');
    if (!win) {
      showStatus('Popup blocked. <a onclick="window.location.href=\'' + searchUrl.replace(/'/g, "\\'") + '\'">Click here</a>', 'error');
      return;
    }

    showStatus('Opened DuckDuckGo. Traffic goes to <strong>duckduckgo.com</strong>.', 'success');
  }

  // ========================================
  // METHOD 14: META REFRESH
  // ========================================
  function openMetaRefresh(url) {
    var win = window.open('about:blank', '_blank');
    if (!win) {
      showStatus('Popup blocked. Allow popups and try again.', 'error');
      return;
    }

    win.document.open();
    win.document.write('<html><head><meta http-equiv="refresh" content="0;url=' + url.replace(/"/g, '&quot;') + '"><title>Math Notes</title></head><body></body></html>');
    win.document.close();

    showStatus('Opened via <strong>meta refresh</strong> redirect from about:blank.', 'success');
  }

  // ========================================
  // METHOD 15: OBJECT TAG
  // ========================================
  function openObjectTag(url) {
    var win = window.open('about:blank', '_blank');
    if (!win) {
      showStatus('Popup blocked. Allow popups and try again.', 'error');
      return;
    }

    win.document.title = 'Math Notes';
    win.document.body.style.cssText = 'margin:0;height:100vh;overflow:hidden;';
    var obj = win.document.createElement('object');
    obj.data = url;
    obj.type = 'text/html';
    obj.style.cssText = 'border:none;width:100%;height:100%;position:fixed;top:0;left:0;';
    win.document.body.appendChild(obj);

    showStatus('Opened via <strong>&lt;object&gt;</strong> tag. Alternative to iframe embedding.', 'success');
  }

  // ========================================
  // METHOD 16: DOUBLE IFRAME
  // ========================================
  function openDoubleIframe(url) {
    var win = window.open('about:blank', '_blank');
    if (!win) {
      showStatus('Popup blocked. Allow popups and try again.', 'error');
      return;
    }

    win.document.title = 'Math Notes';
    var innerHtml = '<!DOCTYPE html><html><head><title>Math Notes</title></head><body style="margin:0;height:100vh;overflow:hidden;"><iframe src="' + url.replace(/"/g, '&quot;') + '" style="border:none;width:100%;height:100%;position:fixed;top:0;left:0;" sandbox="allow-scripts allow-same-origin allow-forms allow-popups"></iframe></body></html>';
    win.document.body.style.cssText = 'margin:0;height:100vh;overflow:hidden;';
    var outerIframe = win.document.createElement('iframe');
    outerIframe.style.cssText = 'border:none;width:100%;height:100%;position:fixed;top:0;left:0;';
    outerIframe.srcdoc = innerHtml;
    win.document.body.appendChild(outerIframe);

    showStatus('Opened via <strong>double iframe</strong> nesting. Extra layer of URL hiding.', 'success');
  }

  // ========================================
  // METHOD 17: WORKER FETCH
  // ========================================
  function openWorkerFetch(url) {
    showStatus('Fetching page via Web Worker...', 'success');

    var workerCode = 'self.onmessage=function(e){fetch(e.data.proxy).then(function(r){return r.text()}).then(function(t){self.postMessage({ok:true,html:t})}).catch(function(err){self.postMessage({ok:false,error:err.message})})}';
    var workerBlob = new Blob([workerCode], { type: 'application/javascript' });
    var workerUrl = URL.createObjectURL(workerBlob);
    var worker = new Worker(workerUrl);

    worker.onmessage = function(e) {
      worker.terminate();
      URL.revokeObjectURL(workerUrl);

      if (e.data.ok) {
        var html = e.data.html;
        var origin = new URL(url).origin;
        html = html.replace('<head>', '<head><base href="' + origin + '/">');

        var win = window.open('about:blank', '_blank');
        if (win) {
          win.document.open();
          win.document.write(html);
          win.document.close();
          win.document.title = 'Math Notes';
          showStatus('Page loaded via <strong>Web Worker</strong> fetch. URL bar shows about:blank.', 'success');
        } else {
          showStatus('Popup blocked. Allow popups and try again.', 'error');
        }
      } else {
        showStatus('Worker fetch error: ' + e.data.error + '. Try a different method.', 'error');
      }
    };

    var proxyUrl = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);
    worker.postMessage({ proxy: proxyUrl });
  }

  // ========================================
  // METHOD 18: PROXY CHAIN
  // ========================================
  function openProxyChain(url) {
    showStatus('Fetching through proxy chain (double proxy)...', 'success');

    var innerProxy = 'https://api.allorigins.win/raw?url=' + encodeURIComponent(url);
    var chainedProxy = 'https://corsproxy.io/?' + encodeURIComponent(innerProxy);

    fetch(chainedProxy)
      .then(function(resp) {
        if (!resp.ok) throw new Error('HTTP ' + resp.status);
        return resp.text();
      })
      .then(function(html) {
        var origin = new URL(url).origin;
        html = html.replace('<head>', '<head><base href="' + origin + '/">');

        var win = window.open('about:blank', '_blank');
        if (win) {
          win.document.open();
          win.document.write(html);
          win.document.close();
          win.document.title = 'Math Notes';
          showStatus('Page loaded through <strong>proxy chain</strong>. Double-proxied for extra bypass.', 'success');
        } else {
          showStatus('Popup blocked. Allow popups and try again.', 'error');
        }
      })
      .catch(function(err) {
        showStatus('Proxy chain error: ' + err.message + '. Try a different method.', 'error');
      });
  }

  // ========================================
  // CLOAK ENTIRE PAGE TO ABOUT:BLANK
  // ========================================
  function openAboutBlank() {
    var win = window.open('about:blank', '_blank');
    if (win) {
      win.document.title = 'Math Notes';
      var link = win.document.createElement('link');
      link.rel = 'icon';
      link.type = 'image/x-icon';
      link.href = new URL('favicon.ico', window.location.href).href;
      win.document.head.appendChild(link);
      win.document.body.style.cssText = 'margin:0;height:100vh;overflow:hidden;';
      var iframe = win.document.createElement('iframe');
      iframe.style.cssText = 'border:none;width:100%;height:100%;position:fixed;top:0;left:0;';
      iframe.src = window.location.href;
      win.document.body.appendChild(iframe);
    }
    window.location.replace('https://google.com');
  }

  // ========================================
  // HELPERS
  // ========================================
  function showStatus(msg, type) {
    var el = document.getElementById('statusMsg');
    el.innerHTML = msg;
    el.className = 'status-msg show ' + (type || '');
  }

  function hideStatus() {
    document.getElementById('statusMsg').className = 'status-msg';
  }

  function showToast(msg) {
    var toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(function() { toast.classList.remove('show'); }, 2500);
  }
</script>
<script>
document.addEventListener('keydown', function(e) {
  if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') return;
  if (e.key === '?' && !e.ctrlKey && !e.metaKey) { e.preventDefault(); panicEngage(); }
  if (e.key === '/' && !e.ctrlKey && !e.metaKey) { e.preventDefault(); panicDisengage(); }
});
</script>

<script>
var _panicActive=false;var _panicPopHandler=null;
function panicEngage(){if(_panicActive)return;_panicActive=true;var els=document.body.children;for(var i=0;i<els.length;i++){if(els[i].className!=='panic-cover'){els[i].setAttribute('data-ph',els[i].style.display||'');els[i].style.display='none';}}var f=document.createElement('iframe');f.className='panic-cover';f.src='https://www.hcpss.me/';f.style.cssText='border:none;width:100vw;height:100vh;position:fixed;top:0;left:0;z-index:999999;background:#fff;';document.body.appendChild(f);document.title='HCPSS';history.pushState(null,'',window.location.href);_panicPopHandler=function(){history.pushState(null,'',window.location.href);};window.addEventListener('popstate',_panicPopHandler);}
function panicDisengage(){if(!_panicActive)return;var c=document.querySelector('.panic-cover');if(c)c.remove();var els=document.querySelectorAll('[data-ph]');for(var i=0;i<els.length;i++){els[i].style.display=els[i].getAttribute('data-ph');els[i].removeAttribute('data-ph');}document.title='Math Notes';if(_panicPopHandler){window.removeEventListener('popstate',_panicPopHandler);_panicPopHandler=null;}_panicActive=false;}
</script>
</body>
</html>
