<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Unblocked Games - AirAI</title>
  <meta name="theme-color" content="#040d01">
  <link rel="icon" type="image/x-icon" href="../favicon.ico">
  <link rel="apple-touch-icon" href="../icons/icon-192x192.svg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: #0a1f0a;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      color: #e8f5e9;
      position: relative;
      overflow-x: hidden;
    }

    /* Animated Background */
    .background-animation {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: 0; overflow: hidden; pointer-events: none;
    }
    .bg-gradient {
      position: absolute; border-radius: 50%; filter: blur(80px);
      opacity: 0.3; animation: float 20s infinite ease-in-out;
    }
    .bg-gradient-1 { width: 500px; height: 500px; background: radial-gradient(circle, #2e7d32, #1b5e20); top: -10%; left: -10%; }
    .bg-gradient-2 { width: 400px; height: 400px; background: radial-gradient(circle, #1b5e20, #0d2818); top: 50%; right: -5%; animation-delay: 7s; }
    .bg-gradient-3 { width: 600px; height: 600px; background: radial-gradient(circle, #2e7d32, #0a1f0a); bottom: -15%; left: 30%; animation-delay: 14s; }
    .grid-pattern {
      position: absolute; width: 100%; height: 100%;
      background-image: linear-gradient(rgba(46,125,50,0.03) 1px, transparent 1px), linear-gradient(90deg, rgba(46,125,50,0.03) 1px, transparent 1px);
      background-size: 50px 50px; animation: gridMove 30s linear infinite;
    }
    .bubble {
      position: absolute; bottom: -100px; background: rgba(46,125,50,0.15);
      border: 2px solid rgba(129,199,132,0.3); border-radius: 50%;
      animation: rise linear infinite; box-shadow: 0 0 20px rgba(46,125,50,0.2);
    }
    .bubble::before {
      content: ''; position: absolute; top: 10%; left: 15%; width: 30%; height: 30%;
      background: rgba(255,255,255,0.2); border-radius: 50%;
    }
    @keyframes rise { to { bottom: 110%; transform: translateX(var(--drift)) rotate(360deg); } }
    .fish { position: absolute; animation: swim linear infinite; opacity: 0.6; }
    .fish svg { filter: drop-shadow(0 0 10px rgba(46,125,50,0.4)); }
    @keyframes swim {
      0% { left: -100px; transform: translateY(0) scaleX(1); }
      48% { transform: translateY(var(--wave)) scaleX(1); }
      50% { transform: translateY(var(--wave)) scaleX(-1); }
      98% { transform: translateY(0) scaleX(-1); }
      100% { left: calc(100% + 100px); transform: translateY(0) scaleX(-1); }
    }
    @keyframes float { 0%,100%{transform:translate(0,0) scale(1)} 33%{transform:translate(30px,-30px) scale(1.1)} 66%{transform:translate(-20px,20px) scale(0.9)} }
    @keyframes gridMove { 0%{transform:translate(0,0)} 100%{transform:translate(50px,50px)} }

    .header, .main-content, .page-footer { position: relative; z-index: 1; }

    /* Header */
    .header { background: #0d2818; border-bottom: 1px solid #1a3d2e; padding: 16px 0; }
    .header-content { max-width: 1200px; margin: 0 auto; padding: 0 24px; display: flex; align-items: center; justify-content: space-between; }
    .logo { display: flex; align-items: center; gap: 12px; text-decoration: none; }
    .logo-icon { width: 32px; height: 32px; background: linear-gradient(135deg, #2e7d32, #1b5e20); border-radius: 8px; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px rgba(46,125,50,0.4); }
    .logo-icon svg { width: 18px; height: 18px; color: #c8e6c9; }
    .logo-text { font-size: 20px; font-weight: 700; color: #c8e6c9; }
    .header-links { display: flex; gap: 32px; align-items: center; }
    .header-link { color: #81c784; text-decoration: none; font-size: 14px; font-weight: 500; transition: color 0.2s; }
    .header-link:hover { color: #c8e6c9; }

    /* Main */
    .main-content { flex: 1; display: flex; align-items: center; justify-content: center; padding: 48px 24px; }
    .login-container { width: 100%; max-width: 480px; }
    .login-header { text-align: center; margin-bottom: 32px; }
    .login-title { font-size: 28px; font-weight: 700; color: #c8e6c9; margin-bottom: 8px; }
    .login-subtitle { font-size: 15px; color: #81c784; }

    /* Card */
    .card { background: #0d2818; border-radius: 12px; border: 1px solid #1a3d2e; padding: 32px; box-shadow: 0 4px 24px rgba(0,0,0,0.4); }

    /* Form */
    .form-group { margin-bottom: 20px; }
    .form-label { display: block; font-size: 14px; font-weight: 500; color: #c8e6c9; margin-bottom: 6px; }
    .form-input {
      width: 100%; padding: 11px 14px; border: 1px solid #1a3d2e; border-radius: 8px;
      font-size: 14px; color: #c8e6c9; background: #0a1f0a; transition: all 0.2s; font-family: inherit;
    }
    .form-input:focus { outline: none; border-color: #2e7d32; box-shadow: 0 0 0 3px rgba(46,125,50,0.2); }
    .form-input::placeholder { color: #4a6b4a; }
    .btn-primary {
      width: 100%; padding: 12px 16px; background: linear-gradient(135deg, #2e7d32, #1b5e20);
      color: #c8e6c9; border: none; border-radius: 8px; font-size: 15px; font-weight: 600;
      cursor: pointer; transition: all 0.2s; box-shadow: 0 4px 12px rgba(46,125,50,0.3);
    }
    .btn-primary:hover { background: linear-gradient(135deg, #388e3c, #1b5e20); box-shadow: 0 6px 16px rgba(46,125,50,0.4); transform: translateY(-1px); }
    .btn-primary:active { transform: scale(0.98); }

    .alert { padding: 12px 16px; border-radius: 8px; margin-bottom: 20px; font-size: 14px; display: none; }
    .alert.show { display: block; }
    .alert-error { background: #1a0f0f; color: #ef9a9a; border: 1px solid #4a2626; }
    .alert-success { background: #0f1a0f; color: #a5d6a7; border: 1px solid #2e4a2e; }

    /* Game Cards */
    .games-section { display: none; }
    .games-section.active { display: block; }

    .game-grid {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .game-card {
      background: #0a1f0a;
      border: 1px solid #1a3d2e;
      border-radius: 10px;
      padding: 20px;
      cursor: pointer;
      transition: all 0.25s;
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .game-card:hover {
      border-color: #2e7d32;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(46,125,50,0.25);
      background: #122a12;
    }
    .game-card:active { transform: scale(0.98); }

    .game-icon {
      width: 52px; height: 52px; min-width: 52px;
      background: linear-gradient(135deg, #2e7d32, #1b5e20);
      border-radius: 12px;
      display: flex; align-items: center; justify-content: center;
      font-size: 24px;
      box-shadow: 0 0 16px rgba(46,125,50,0.3);
    }

    .game-info { flex: 1; }
    .game-name { font-size: 16px; font-weight: 700; color: #c8e6c9; margin-bottom: 4px; }
    .game-desc { font-size: 13px; color: #81c784; }

    .game-arrow {
      color: #4a6b4a;
      font-size: 20px;
      transition: color 0.2s, transform 0.2s;
    }
    .game-card:hover .game-arrow { color: #81c784; transform: translateX(4px); }

    .more-card {
      background: rgba(46,125,50,0.08);
      border: 2px dashed #2e7d32;
    }
    .more-card:hover {
      background: rgba(46,125,50,0.15);
      border-style: solid;
    }
    .more-card .game-icon {
      background: linear-gradient(135deg, #1b5e20, #0d3b14);
      border: 1px solid #2e7d32;
    }

    /* Footer */
    .page-footer { background: #0d2818; border-top: 1px solid #1a3d2e; padding: 24px 0; margin-top: auto; }
    .page-footer-content { max-width: 1200px; margin: 0 auto; padding: 0 24px; display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 16px; }
    .footer-text { font-size: 13px; color: #66bb6a; }
    .footer-nav { display: flex; gap: 24px; }
    .footer-nav a { font-size: 13px; color: #66bb6a; text-decoration: none; }
    .footer-nav a:hover { color: #c8e6c9; }

    @media (max-width: 640px) {
      .header-links { display: none; }
      .card { padding: 24px; }
      .login-title { font-size: 24px; }
      .game-card { padding: 16px; gap: 12px; }
      .game-icon { width: 44px; height: 44px; min-width: 44px; font-size: 20px; }
      .game-name { font-size: 15px; }
      .page-footer-content { flex-direction: column; text-align: center; }
    }
  </style>
</head>
<body>
  <!-- Animated Background -->
  <div class="background-animation">
    <div class="grid-pattern"></div>
    <div class="bg-gradient bg-gradient-1"></div>
    <div class="bg-gradient bg-gradient-2"></div>
    <div class="bg-gradient bg-gradient-3"></div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <a href="login.html" class="logo">
        <div class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
            <path d="M13 10V3L4 14h7v7l9-11h-7z"/>
          </svg>
        </div>
        <span class="logo-text">AirAI ¬∑ Unblocked Games</span>
      </a>
      <nav class="header-links">
        <a href="#" class="header-link" onclick="event.preventDefault();window.location.href='login.html'">‚Üê Back to Login</a>
        <a href="../light-mode/unblocked-games_light.html" class="header-link">‚òÄÔ∏è Light Mode</a>
      </nav>
    </div>
  </header>

  <!-- Main -->
  <main class="main-content">
    <div class="login-container">
      <!-- Auth Screen -->
      <div id="authScreen">
        <div class="login-header">
          <h1 class="login-title">üïπÔ∏è Unblocked Games</h1>
          <p class="login-subtitle">Enter your auth code to continue</p>
        </div>
        <div class="card">
          <div id="alertError" class="alert alert-error"></div>
          <div id="alertSuccess" class="alert alert-success"></div>
          <form onsubmit="handleAuthCode(event)">
            <div class="form-group">
              <label class="form-label" for="authCode">Member Key</label>
              <input type="text" id="authCode" class="form-input" placeholder="Enter your 6-digit code"
                maxlength="6" autocomplete="off" required
                style="text-align:center; font-size:24px; letter-spacing:8px; font-family:'Courier New',monospace;">
            </div>
            <button type="submit" id="authBtn" class="btn-primary">Verify & Enter</button>
          </form>
        </div>
      </div>

      <!-- Games Screen -->
      <div id="gamesScreen" class="games-section">
        <div class="login-header">
          <h1 class="login-title">üïπÔ∏è Unblocked Games</h1>
          <p class="login-subtitle">Welcome, <strong id="menuUsername">User</strong></p>
        </div>
        <div class="card">
          <div class="game-grid">
            <div class="game-card" onclick="launchGame('polytrack042')">
              <div class="game-icon">üèéÔ∏è</div>
              <div class="game-info">
                <div class="game-name">Polytrack 0.4.2</div>
                <div class="game-desc">Low-poly racing game ¬∑ v0.4.2</div>
              </div>
              <div class="game-arrow">‚Üí</div>
            </div>
            <div class="game-card" onclick="launchGame('polytrack051')">
              <div class="game-icon">üèÅ</div>
              <div class="game-info">
                <div class="game-name">Polytrack 0.5.1</div>
                <div class="game-desc">Low-poly racing game ¬∑ v0.5.1</div>
              </div>
              <div class="game-arrow">‚Üí</div>
            </div>
            <div class="game-card more-card" onclick="launchGame('more')">
              <div class="game-icon">‚ûï</div>
              <div class="game-info">
                <div class="game-name">More Games</div>
                <div class="game-desc">Browse the full unblocked games collection</div>
              </div>
              <div class="game-arrow">‚Üí</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- Footer -->
  <footer class="page-footer">
    <div class="page-footer-content">
      <p class="footer-text">¬© 2026 AirAI, Inc. All rights reserved. ¬∑ <span style="color: #4a6b4a;" data-version>v2.1</span></p>
      <nav class="footer-nav">
        <a href="login.html">Login</a>
      </nav>
    </div>
  </footer>

  <script>
    // ============================================
    // BACKGROUND ANIMATIONS
    // ============================================
    function createBubbles() {
      const bg = document.querySelector('.background-animation');
      for (let i = 0; i < 15; i++) {
        const b = document.createElement('div'); b.className = 'bubble';
        const sz = Math.random()*60+20;
        b.style.width = sz+'px'; b.style.height = sz+'px';
        b.style.left = Math.random()*100+'%';
        b.style.animationDuration = (Math.random()*10+10)+'s';
        b.style.animationDelay = (Math.random()*5)+'s';
        b.style.setProperty('--drift', (Math.random()-0.5)*200+'px');
        bg.appendChild(b);
      }
    }
    function createFish() {
      const bg = document.querySelector('.background-animation');
      const svg = '<svg width="60" height="30" viewBox="0 0 60 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5 15C5 15 10 5 25 5C35 5 45 10 55 15C45 20 35 25 25 25C10 25 5 15 5 15Z" fill="rgba(46,125,50,0.4)" stroke="rgba(129,199,132,0.6)" stroke-width="1.5"/><circle cx="35" cy="15" r="2" fill="rgba(200,230,201,0.8)"/><path d="M5 15L0 10L0 20L5 15Z" fill="rgba(46,125,50,0.4)" stroke="rgba(129,199,132,0.6)" stroke-width="1.5"/></svg>';
      for (let i = 0; i < 8; i++) {
        const f = document.createElement('div'); f.className = 'fish'; f.innerHTML = svg;
        f.style.top = (Math.random()*80+10)+'%';
        f.style.animationDuration = (Math.random()*8+8)+'s';
        f.style.animationDelay = (Math.random()*3)+'s';
        f.style.setProperty('--wave', (Math.random()-0.5)*100+'px');
        f.style.transform = 'scale('+(Math.random()*0.5+0.7)+')';
        bg.appendChild(f);
      }
    }
    createBubbles(); createFish();

    // ============================================
    // GAME DATA
    // ============================================
    const games = {
      polytrack042: {
        name: 'Polytrack 0.4.2',
        url: 'https://script.google.com/macros/s/AKfycbzuhv-wKflC3QgCI_d8xsy90ngRlqgKj-qfICMuzhimGuYwWXFI5tPWwwfjrYk-biJu/exec',
        iframe: true
      },
      polytrack051: {
        name: 'Polytrack 0.5.1',
        url: 'https://script.google.com/macros/s/AKfycbwH_SCPqBH7hDV1yIv9etRF_5IWDXZ52mDPh7xbkPMOrBJQFTO9eNYglzG5Ok6KvzC8/exec',
        iframe: true
      },
      more: {
        name: 'More Games',
        url: 'https://sites.google.com/view/drive-u-7-home/home',
        iframe: false
      }
    };

    // ============================================
    // AUTO-FILL FROM URL PARAM
    // ============================================
    (function() {
      const p = new URLSearchParams(window.location.search);
      const k = p.get('memberKey');
      if (k) {
        document.getElementById('authCode').value = k;
        setTimeout(() => document.querySelector('#authScreen form').dispatchEvent(new Event('submit')), 300);
      }
    })();

    // ============================================
    // AUTH
    // ============================================
    function handleAuthCode(e) {
      e.preventDefault();
      const code = document.getElementById('authCode').value.trim();
      document.getElementById('alertError').classList.remove('show');
      document.getElementById('alertSuccess').classList.remove('show');
      if (!code) { showAlert('error','Please enter your member key.'); return; }
      const btn = document.getElementById('authBtn');
      const orig = btn.textContent; btn.disabled = true; btn.textContent = 'Verifying...';
      const cb = 'verifyCallback' + Date.now();
      window[cb] = function(data) {
        btn.disabled = false; btn.textContent = orig;
        if (data.success) {
          showAlert('success','Access granted!');
          setTimeout(() => {
            document.getElementById('authScreen').style.display = 'none';
            document.getElementById('gamesScreen').classList.add('active');
            document.getElementById('menuUsername').textContent = data.username || 'User';
          }, 600);
        } else { showAlert('error', data.error || 'Invalid or expired code.'); }
        delete window[cb];
      };
      const s = document.createElement('script');
      s.src = 'https://script.google.com/macros/s/AKfycbzHDXl45MX96gaOlKPeqD4Q75nNeDm1cMUvQpc0GWVXHSE8ErnMbkZ6GSMnO9zTbFO_Bg/exec?action=validateCode&code=' + encodeURIComponent(code) + '&callback=' + cb;
      s.onerror = function() { btn.disabled=false; btn.textContent=orig; showAlert('error','Connection failed.'); delete window[cb]; };
      document.body.appendChild(s);
    }
    function showAlert(type, msg) {
      const el = document.getElementById(type==='error'?'alertError':'alertSuccess');
      el.textContent = msg; el.classList.add('show');
    }

    // ============================================
    // LAUNCH GAME
    // ============================================
    function launchGame(id) {
      const game = games[id];
      if (!game) return;

      if (game.iframe) {
        // Open in about:blank cloaked window
        const win = window.open('about:blank', '_blank');
        if (win) {
          win.document.open();
          win.document.write(
            '<!DOCTYPE html><html><head><title>' + game.name + '</title>' +
            '<style>body{margin:0;overflow:hidden;height:100vh}iframe{width:100%;height:100%;border:none}</style>' +
            '</head><body><iframe src="' + game.url + '"></iframe></body></html>'
          );
          win.document.close();
        }
      } else {
        window.open(game.url, '_blank');
      }
    }
  </script>

<script src="../config.js"></script>
</body>
</html>
